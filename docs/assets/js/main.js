"use strict";const btn=document.querySelector(".js-searchBtn"),rsltContainer=document.querySelector(".js-searchContainer"),favContainer=document.querySelector(".js-favContainer"),input=document.querySelector(".js-input");let clickedCardID,favCardID,results=[],favList=[];function handleSearch(){getData(),renderResults(),listenToCards()}function getData(){const e=input.value;fetch("//api.tvmaze.com/search/shows?q="+e).then((function(e){return e.json()})).then((function(e){results=e}))}function renderResults(){let e="";for(let a=0;a<results.length;a++)e+=`<li class="card js-card" id="${[a]}">`,e+=`<h3 class="card__title">${results[a].show.name}</h3>`,null===results[a].show.image?e+='<img src="//via.placeholder.com/210x296/f0ffff/00008b/?text=No+image+available"/>':e+=`<img class="card__img" src="${results[a].show.image.medium}"/>`,e+="</li>",rsltContainer.innerHTML=e}function listenToCards(){const e=document.querySelectorAll(".js-card");for(const a of e)a.addEventListener("click",handleFav)}function handleFav(){saveFav()}function clearFav(){favContainer.innerHTML=""}function handleFav(e){clickedCardID=parseInt(e.currentTarget.id);const a=favList.indexOf(clickedCardID);-1===a?(favList.push(clickedCardID),e.currentTarget.classList.add("highlightCard"),paintFav()):a>-1&&(favList.splice(a,1),e.currentTarget.classList.remove("highlightCard"),clearFav()),setLocalStorage()}btn.addEventListener("click",handleSearch);let filledFavHtml="";function paintFav(){filledFavHtml+=`<li class="card favCard js-card" id="${clickedCardID}">`,filledFavHtml+=`<h3 class="favCard__title">${results[clickedCardID].show.name}</h3>`,null===results[clickedCardID].show.image?filledFavHtml+='<img class="favCard__img" src="//via.placeholder.com/210x296/f0ffff/00008b/?text=No+image+available"/>':filledFavHtml+=`<img class="favCard__img" src="${results[clickedCardID].show.image.medium}"/>`,filledFavHtml+="</li>",favContainer.innerHTML=filledFavHtml}function setLocalStorage(){localStorage.setItem("favList",JSON.stringify(favList))}